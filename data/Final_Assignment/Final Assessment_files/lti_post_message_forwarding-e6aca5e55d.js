const handler=(s,a,w,c)=>t=>{let o;try{o="string"==typeof t.data?JSON.parse(t.data):t.data}catch(e){return!1}if(t.origin===s){const{sourceToolInfo:n,...d}=o;if(!n)return!1;var e=n?.origin;const i=a[n?.windowId];i?.postMessage(d,e)}else{let e=a.indexOf(t.source),n=(-1===e&&(a.push(t.source),e=a.length-1),null);for(let e=0;e<window.top.frames.length;e++)if(window.top.frames[e]===t.source){n=e;break}const r={...o,sourceToolInfo:{origin:t.origin,windowId:e,indexInTopFrames:n}};c&&(r.in_rce=!0),w?.postMessage(r,s)}},ready=e=>{const n="object"==typeof document&&document;if(!n||/^loaded|^i|^c/.test(n.readyState))e();else{const t=()=>{e(),n.removeEventListener("DOMContentLoaded",t)};n.addEventListener("DOMContentLoaded",t)}},init=()=>{ready(()=>{var{PARENT_ORIGIN:e,IN_RCE:n}=window.ENV,t=[];n?(n=window.parent.parent,window.addEventListener("message",handler(window.origin,t,n,!0))):window.addEventListener("message",handler(e,t,window.top))})};"undefined"==typeof jest?init():module.exports={handler:handler,init:init};
//# sourceMappingURL=../maps/javascripts/lti_post_message_forwarding-e6aca5e55d.js.map
